#!/bin/bash
#
# Loaded for each terminal and sourced at login by ~/.bash_profile.
#
# If not running interactively, don't do anything
[ -z "$PS1" ] && return

# Enable programmable completion features (you don't need to enable this, if
# it's already enabled in /etc/bash.bashrc and /etc/profile sources
# /etc/bash.bashrc).
[ -f /etc/bash_completion ] && . /etc/bash_completion

set -o vi                         # Run bash with vi keys instead of emacs
shopt -s checkwinsize
shopt -s histappend
shopt -s cdspell                  # Let bash help you change directories when you can't spell

export MANPAGER="nvim -c 'set ft=man' -"
export HISTCONTROL=ignoredups
export HISTSIZE=100000
export PROMPT_COMMAND='history -a'
export EDITOR=nvim
export TERM=xterm-256color                  # this is for solarized
export COLUMNS=$COLUMNS

#
# Set the dotfile plugins to load. These correspond to files in
# $DOTFILES/plugins
#
# shellcheck disable=SC2034
export DOTFILE_PLUGINS=(
    aws
    bommie
    cd
    dircolors
    docker
    dotfiles
    find
    fzf
    git
    go
    gruf
    opsdb
    less
    ls
    powerline-go
    ps
    python
    ruby
    rvm
    tmux
    virtualgo
    wish
    direnv		# direnv must be initiliazed last
)

#
# Activate ocd dotfiles, load plugins, etc.
#
# Find out where the dotfiles repo is on disk by following the .bashrc link.
# This assumes the dotfiles `install' script has been run which makes the .bashrc
# link.
#
dotfiles_activate() {
    if [ -L ~/.bashrc ]; then
        local bashrc_location=$(readlink -f ~/.bashrc)
        local dotfiles_dir=${bashrc_location%/rcs/bashrc}
        source "$dotfiles_dir/activate.sh"
    fi
}
dotfiles_activate
